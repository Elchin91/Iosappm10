# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Å–±–æ—Ä–∫–∏ IPA (–±–µ–∑ EAS)

## –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–∞ Mac —á–µ—Ä–µ–∑ Xcode ‚≠ê (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Mac —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Xcode
- CocoaPods (`sudo gem install cocoapods`)

### –®–∞–≥–∏:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   cd ios
   pod install
   cd ..
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   chmod +x build-local-xcode.sh
   ./build-local-xcode.sh
   ```

3. **–ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Xcode:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `ios/M10Wallet.xcworkspace` –≤ Xcode
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É "M10Wallet" –∏ "Any iOS Device"
   - Product ‚Üí Archive
   - –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞: Window ‚Üí Organizer
   - –í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ö–∏–≤ ‚Üí Distribute App
   - –í—ã–±–µ—Ä–∏—Ç–µ "Ad Hoc" –∏–ª–∏ "Development"
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ IPA

4. **–ù–∞–π–¥–∏—Ç–µ IPA —Ñ–∞–π–ª** –≤ –ø–∞–ø–∫–µ `build/ipa/`

## –í–∞—Ä–∏–∞–Ω—Ç 2: GitHub Actions —Å Mac Runner

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ workflow **"Build iOS IPA with Xcode"** –≤ —Ä–∞–∑–¥–µ–ª–µ Actions.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç EAS
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚è±Ô∏è Mac runners –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–Ω—è—Ç—ã (–æ—á–µ—Ä–µ–¥—å)
- ‚è±Ô∏è –°–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

## –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö CI/CD —Å–µ—Ä–≤–∏—Å–æ–≤

### CircleCI
```yaml
# .circleci/config.yml
version: 2.1
jobs:
  build-ios:
    macos:
      xcode: "15.0.0"
    steps:
      - checkout
      - run: npm ci
      - run: cd ios && pod install
      - run: xcodebuild archive ...
```

### Bitrise
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ iOS workflow
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–≥–∏: Git Clone ‚Üí Install dependencies ‚Üí Xcode Archive ‚Üí Export IPA

### Codemagic
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –í—ã–±–µ—Ä–∏—Ç–µ iOS workflow
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–±–æ—Ä–∫—É

## –í–∞—Ä–∏–∞–Ω—Ç 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Expo Development Build (–ª–æ–∫–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å Mac, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Expo CLI:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ –Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
npx expo prebuild

# –°–æ–±–µ—Ä–∏—Ç–µ —á–µ—Ä–µ–∑ Xcode
cd ios
pod install
cd ..
npx expo run:ios --configuration Release --device
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ú–µ—Ç–æ–¥ | –¢—Ä–µ–±—É–µ—Ç Mac | –¢—Ä–µ–±—É–µ—Ç EAS | –°–∫–æ—Ä–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-------|-------------|-------------|----------|-----------|
| EAS Build | ‚ùå | ‚úÖ | ‚ö°‚ö°‚ö° | üü¢ –õ–µ–≥–∫–æ |
| Xcode (–ª–æ–∫–∞–ª—å–Ω–æ) | ‚úÖ | ‚ùå | ‚ö°‚ö° | üü° –°—Ä–µ–¥–Ω–µ |
| GitHub Actions Mac | ‚ùå | ‚ùå | ‚ö° | üü° –°—Ä–µ–¥–Ω–µ |
| CircleCI/Bitrise | ‚ùå | ‚ùå | ‚ö°‚ö° | üî¥ –°–ª–æ–∂–Ω–æ |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è **Trollstore** –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç:
1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–∞ Mac** (–µ—Å–ª–∏ –µ—Å—Ç—å Mac) - —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±
2. **GitHub Actions —Å Mac runner** (–µ—Å–ª–∏ –Ω–µ—Ç Mac) - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–µ–∑ EAS
3. **EAS Build** - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å

## Troubleshooting

### –û—à–∏–±–∫–∞: "Code signing required"
–î–ª—è Trollstore –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π IPA –∏–ª–∏ ad-hoc –ø–æ–¥–ø–∏—Å—å:
- –í Xcode: Signing & Capabilities ‚Üí Automatically manage signing (–æ—Ç–∫–ª—é—á–∏—Ç—å)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `build-local-xcode.sh` –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å

### –û—à–∏–±–∫–∞: "No provisioning profile"
–î–ª—è Trollstore –Ω–µ –Ω—É–∂–µ–Ω provisioning profile, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ad-hoc distribution –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ –ø–æ–¥–ø–∏—Å—å.

